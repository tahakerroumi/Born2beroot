#!/bin/bash

#FILE
uname=$(uname -a)

#CPU PHYSICAL
NVP=$(grep "physical id" /proc/cpuinfo | wc -l)

#VIRTUAL-CPU
vCPU=$(grep "processor" /proc/cpuinfo | wc -l)

#RAM
total=$(free -m | awk '$1 == "Mem:" {print $2}')
usage=$(free -m | awk '$1 == "Mem:" {print $3}')
cal=$(free -m | awk '$1 == "Mem:" {printf("%.2f"), $3/$2*100}')

#DISK
total_disk=$(df -m | grep "/dev/" | grep -v "/boot" | awk 'END {printf("%.1fGb\n" ,$2/1024)}')
usage_disk=$(df -m | grep "/dev/" | grep -v "/boot" | awk 'END {print $3}')
percent_disk=$(df -m | grep "/dev/" | grep -v "/boot" | awk 'END {printf("%d", $3/$2*100)}')

#CPU LOAD
cpul=$(vmstat 1 2 | tail -1 | awk '{print $15}')
cpuop=$(expr 100 - $cpul)
cpuend=$(printf "%.1f" $cpuop)

#last boot
lboot=$(who -b | awk '{print($3 " " $4)}')

#lvm use
lvmu=$(if [ $(lsblk | grep "lvm" | wc -l) -gt 0 ]; then echo yes; else echo no; fi)

#TCp connections
TCP=$(ss -ta | grep ESTAB | wc -l)

#user
users=$(users | wc -w)

#NETWORK
ip=$(hostname -I)
mac=$(ip link | grep "link/ether" | awk '{print $2}')

#SUDO
cmnd=$(journalctl _COMM=sudo | grep COMMAND | wc -l)

wall "		#Architecture: $uname
		#CPU physical : $NVP
		#vCPU : $vCPU
		#Memory Usage: $usage/${total}MB ($cal%)
		#Disk Usage : $usage_disk/$total_disk ($percent_disk%)
		#CPU load : $cpuend
		#Last boot : $lboot
		#LVM use : $lvmu
		#Connection TCP : $TCP ESTABLISHED
		#User log : $users
		#Network : IP $ip ($mac)
		#Sudo : $cmnd cmd"

